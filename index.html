<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Portal DefensorÃ­a Civil y Comercial 6</title>
  <style>
    * {box-sizing: border-box; margin: 0; padding: 0; font-family: Arial, sans-serif;}
    body {height: 100vh; display: flex; flex-direction: column;}

    /* LOGIN */
    #login-container {
      flex: 1;
      display: flex;
      height: 100vh;
      background: none;
      padding: 0;
    }
    .login-left {
      flex: 1;
      display: flex;
      justify-content: center;
      align-items: center;
      background: black;
    }
    .login-left iframe {
      width: 100%;
      height: 100%;
      border: none;
    }
    .login-right {
      flex: 1;
      display: flex;
      justify-content: center;
      align-items: center;
      background: url('https://raw.githubusercontent.com/Defensoria6/sistemacausas/c43141ef2569c0b4a6af8b013d2a27d871d2ea4f/fondo.jpg') no-repeat center center;
      background-size: cover;
      padding: 1rem;
    }
    #login-box {
      background: rgba(255, 255, 255, 0.85);
      padding: 2rem;
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      width: 100%;
      max-width: 420px;
      text-align: center;
    }

    #login-box h1 {font-size: 1.3rem; margin-bottom: 0.5rem;}
    #login-box h3 {font-size: 0.95rem; color: #555; margin-bottom: 1.5rem;}
    #login-box h2 {margin-bottom: 1rem;}
    #login-box input, #login-box select {
      width: 100%; padding: 0.75rem; margin: 0.5rem 0;
      border: 1px solid #ccc; border-radius: 8px; font-size: 1rem;
    }
    #login-box button {
      width: 100%; padding: 0.75rem; background: #0066cc;
      color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 1rem;
    }
    #login-box button:hover {background: #004999;}
    #login-box p.notice {
      font-size: 0.85rem; color: #444; margin-top: 1.5rem; line-height: 1.5;
      background: #f1f1f1; border: 1px solid #ccc; border-radius: 8px;
      padding: 1rem;
    }

    /* APP */
    #app {display: none; flex: 1; flex-direction: column; min-height: 100vh;}

    /* HEADER angosto */
    header {
      background: #0066cc;
      color: white;
      padding: 0.4rem 0.75rem;
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }
    header h1 {font-size: 1.05rem; font-weight: 600;}

    .top-user-info {
      margin-left: auto;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      min-width: 0;
    }
    .top-user-info .user-details {
      text-align: right;
      font-size: 0.85rem;
      line-height: 1;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      max-width: 65vw;
    }
    .top-user-info .user-details strong {font-weight: 700;}
    .top-user-info button {
      background: #cc0000; color: white; font-weight: bold;
      border: none; border-radius: 6px; padding: 0.35rem 0.6rem;
      cursor: pointer; font-size: 0.8rem; flex: 0 0 auto;
    }
    .top-user-info button:hover {background: #990000;}

    .layout {display: flex; flex: 1;}
    .sidebar {
      display: flex; flex-direction: column;
      width: 220px; background: #0066cc; color: white;
      padding: 1rem 0.5rem; height: calc(100vh - 60px);
      transition: width 0.3s ease; cursor: pointer;
    }
    .sidebar.collapsed {width: 70px;}
    .sidebar h2 {font-size: 1rem; margin-bottom: 1rem; text-align: center; transition: opacity 0.3s;}
    .sidebar.collapsed h2 {opacity: 0;}
    .sidebar nav a {
      display: flex; align-items: center; gap: 10px;
      color: white; text-decoration: none;
      padding: 0.6rem; margin: 0.3rem;
      border-radius: 6px; background: rgba(255,255,255,0.1);
      transition: all 0.3s ease; white-space: nowrap; position: relative;
    }
    .sidebar nav a:hover {background: rgba(255,255,255,0.3);}
    .sidebar.collapsed nav a span {display: none;}
    .sidebar nav a::after {
      content: attr(data-title);
      position: absolute; left: 100%; top: 50%;
      transform: translateY(-50%);
      background: #333; color: #fff;
      padding: 4px 8px; border-radius: 4px;
      white-space: nowrap;
      opacity: 0; pointer-events: none;
      transition: opacity 0.2s; margin-left: 8px; font-size: 0.8rem;
    }
    .sidebar.collapsed nav a:hover::after {opacity: 1;}

    main {flex: 1; display: flex; position: relative;}
    iframe {flex: 1; border: none; background: white; min-height: 500px;}

    /* CHATBOT STYLES */
    #chatbot-toggle {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 60px;
      height: 60px;
      background: #0066cc;
      border: none;
      border-radius: 50%;
      color: white;
      font-size: 24px;
      cursor: pointer;
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
      z-index: 1000;
      transition: all 0.3s ease;
      display: none;
    }

    #chatbot-toggle:hover {
      background: #004999;
      transform: scale(1.1);
    }

    #chatbot-container {
      position: fixed;
      bottom: 90px;
      right: 20px;
      width: 350px;
      height: 500px;
      background: white;
      border-radius: 12px;
      box-shadow: 0 8px 25px rgba(0,0,0,0.2);
      z-index: 1000;
      display: none;
      flex-direction: column;
      overflow: hidden;
    }

    #chatbot-header {
      background: #0066cc;
      color: white;
      padding: 15px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    #chatbot-header h3 {
      font-size: 1.1rem;
      font-weight: 600;
    }

    #chatbot-close {
      background: none;
      border: none;
      color: white;
      font-size: 20px;
      cursor: pointer;
      padding: 0;
      width: 25px;
      height: 25px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    #chatbot-messages {
      flex: 1;
      padding: 15px;
      overflow-y: auto;
      background: #f8f9fa;
    }

    .message {
      margin-bottom: 15px;
      display: flex;
      align-items: flex-start;
      gap: 10px;
    }

    .message.bot {flex-direction: row;}
    .message.user {flex-direction: row-reverse;}

    .message-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 16px;
      flex-shrink: 0;
    }

    .message.bot .message-avatar {background: #0066cc; color: white;}
    .message.user .message-avatar {background: #28a745; color: white;}

    .message-content {
      background: white;
      padding: 10px 15px;
      border-radius: 18px;
      max-width: 250px;
      word-wrap: break-word;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }

    .message.user .message-content {background: #0066cc; color: white;}

    #chatbot-input-container {
      padding: 15px;
      background: white;
      border-top: 1px solid #e9ecef;
      display: flex;
      gap: 10px;
    }

    #chatbot-input {
      flex: 1;
      padding: 10px 15px;
      border: 1px solid #ddd;
      border-radius: 20px;
      outline: none;
      font-size: 14px;
    }

    #chatbot-send {
      background: #0066cc;
      color: white;
      border: none;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 16px;
    }

    #chatbot-send:hover {background: #004999;}

    .quick-actions {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 10px;
    }

    .quick-action {
      background: #e9ecef;
      border: 1px solid #ddd;
      border-radius: 15px;
      padding: 6px 12px;
      font-size: 12px;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .quick-action:hover {background: #0066cc; color: white;}

    /* RESPONSIVE */
    @media (max-width: 1024px) {
      #login-container {
        flex-direction: column;
        height: auto;
      }
      .login-left, .login-right {
        flex: none;
        width: 100%;
        height: auto;
      }
      .login-left iframe {
        height: 250px;
      }
      .login-right {
        padding: 1rem;
      }
    }

    @media (max-width: 600px) {
      .login-left iframe {
        height: 200px;
      }
      #login-box {
        width: 100%;
        max-width: 100%;
        padding: 1rem;
        border-radius: 0;
        box-shadow: none;
      }
    }
  </style>
</head>
<body>
  <!-- LOGIN -->
  <div id="login-container">
    <div class="login-left">
      <iframe width="100%" height="100%" 
        src="https://youtu.be/mOsk64DvzFc" 
        title="Video Institucional" 
        frameborder="0" 
        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
        allowfullscreen>
      </iframe>
    </div>
    <div class="login-right">
      <div id="login-box">
        <h1>Sistema de AdministraciÃ³n de Causas Judiciales</h1>
        <h3>DefensorÃ­a Civil y Comercial 6 - Poder Judicial de Misiones</h3>
        <h2>Iniciar SesiÃ³n</h2>
        <form id="login-form" onsubmit="event.preventDefault(); login();">
          <input type="text" id="username" placeholder="Usuario (Nombre Apellido)">
          <input type="email" id="email" placeholder="Email">
          <select id="role">
            <option value="">Seleccione rol de usuario</option>
            <option value="Administrador">Administrador</option>
            <option value="Defensor">Defensor</option>
            <option value="Secretario">Secretario</option>
            <option value="Empleado">Empleado</option>
          </select>
          <input type="password" id="password" placeholder="ContraseÃ±a">
          <button type="submit">Entrar</button>
        </form>
        <p class="notice">
          En caso de algÃºn inconveniente, problema de funcionalidad, dudas o consultas sobre el sistema:<br>
          ComunÃ­quese al email:
          <a href="https://correo.jusmisiones.gov.ar/#1" target="_blank">rcfioravante@jusmisiones.gov.ar</a><br><br>
          Incluya en el mensaje los siguientes datos: Nombre y Apellido, Email y Rol de Usuario registrado en el sistema.<br>
          En breve estaremos en contacto.
        <h3>Uso exclusivo con acceso remoto</h3>
        </p>
      </div>
    </div>
  </div>

  <!-- APP -->
  <div id="app">
    <header>
      <h1 id="active-section">Portal DefensorÃ­a</h1>
      <div class="top-user-info">
        <div class="user-details" id="user-info" title=""></div>
        <button onclick="logout()">Cerrar SesiÃ³n</button>
      </div>
    </header>
    <div class="layout">
      <div class="sidebar" id="sidebar">
        <h2>MenÃº</h2>
        <nav>
          <a href="#" onclick="loadPage('https://defensoria6.github.io/registro-causas/', this)" data-title="Registro Causas">ğŸ“‘ <span>Registro Causas</span></a>
          <a href="#" onclick="loadPage('https://defensoria6.github.io/datospartes/', this)" data-title="Datos Partes">ğŸ‘¥ <span>Datos Partes</span></a>
          <a href="#" onclick="loadPage('https://defensoria6.github.io/proteccion-personas/', this)" data-title="ProtecciÃ³n Personas">ğŸ›¡ï¸ <span>ProtecciÃ³n Personas</span></a>
          <a href="#" onclick="loadPage('https://defensoria6.github.io/calendario/', this)" data-title="Calendario">ğŸ“… <span>Calendario</span></a>
          <a href="#" onclick="loadPage('https://defensoria6.github.io/estadistica-sistema/', this)" data-title="EstadÃ­stica">ğŸ“Š <span>EstadÃ­stica</span></a>
          <a href="#" onclick="loadPage('https://defensoria6.github.io/atencion-publico/', this)" data-title="AtenciÃ³n PÃºblico">ğŸ’¬ <span>AtenciÃ³n PÃºblico</span></a>
        </nav>
      </div>
      <main>
        <iframe id="content-frame" src="https://defensoria6.github.io/registro-causas/"></iframe>
      </main>
    </div>

    <!-- CHATBOT -->
    <button id="chatbot-toggle" onclick="toggleChatbot()">ğŸ’¬</button>

    <div id="chatbot-container">
      <div id="chatbot-header">
        <h3>ğŸ’¬ Asistente SeisBot</h3>
        <button id="chatbot-close" onclick="toggleChatbot()">Ã—</button>
      </div>

      <div id="chatbot-messages"></div>

      <div id="chatbot-input-container">
        <input type="text" id="chatbot-input" placeholder="Escribe tu consulta..." onkeypress="handleChatbotKeyPress(event)">
        <button id="chatbot-send" onclick="sendMessage()">â¤</button>
      </div>
    </div>
  </div>

  <script>
    let chatbotOpen = false;
    let currentUser = '';

    function login(){
      const user = document.getElementById('username').value.trim();
      const email = document.getElementById('email').value.trim();
      const role = document.getElementById('role').value.trim();
      const pass = document.getElementById('password').value.trim();
      if(user && email && role && pass){
        currentUser = user;
        document.getElementById('login-container').style.display = 'none';
        document.getElementById('app').style.display = 'flex';
        const line = "<strong>" + user + "</strong> â€” " + email + " â€” <strong>Rol: " + role + "</strong>";
        const info = document.getElementById('user-info');
        info.innerHTML = line;
        info.setAttribute('title', user + " | " + email + " | Rol: " + role);
        document.getElementById('active-section').innerText = "Registro Causas";

        // Mostrar el chatbot despuÃ©s del login
        document.getElementById('chatbot-toggle').style.display = 'block';

        // Inicializar el chatbot con mensaje de bienvenida
        setTimeout(() => {
          initializeChatbot();
        }, 1000);
      } else {
        alert('Complete todos los campos: usuario, email, rol y contraseÃ±a');
      }
    }

    function logout(){
      document.getElementById('app').style.display = 'none';
      document.getElementById('login-container').style.display = 'flex';
      document.getElementById('username').value =
      document.getElementById('email').value =
      document.getElementById('role').value =
      document.getElementById('password').value = '';

      // Ocultar el chatbot
      document.getElementById('chatbot-toggle').style.display = 'none';
      document.getElementById('chatbot-container').style.display = 'none';
      chatbotOpen = false;

      // Limpiar mensajes del chatbot
      document.getElementById('chatbot-messages').innerHTML = '';
    }

    function loadPage(url, element){
      const iframe = document.getElementById('content-frame');
      iframe.src = url;
      if(element) document.getElementById('active-section').innerText = element.getAttribute("data-title");
    }

    document.getElementById('sidebar').addEventListener('click', function(e) {
      if(e.target.tagName !== "A") this.classList.toggle('collapsed');
    });

    // --- CHATBOT ---
    function toggleChatbot() {
      chatbotOpen = !chatbotOpen;
      const container = document.getElementById('chatbot-container');
      container.style.display = chatbotOpen ? 'flex' : 'none';

      if (chatbotOpen && document.getElementById('chatbot-messages').children.length === 0) {
        initializeChatbot();
      }
    }

    function initializeChatbot() {
      const welcomeMessage = `Â¡Hola ${currentUser}! ğŸ‘‹ Soy SeisBot, tu asistente virtual del Sistema de DefensorÃ­a Civil y Comercial 6.

Estoy aquÃ­ para ayudarte con:

ğŸ” <b>BÃºsqueda de datos</b> en causas, partes y medidas de protecciÃ³n
ğŸ“‚ <b>NavegaciÃ³n por secciones</b> del portal
ğŸ“… <b>Audiencias y calendario</b>
â° <b>Vencimientos y plazos</b>
ğŸ“Š <b>EstadÃ­sticas del sistema</b>
ğŸ’¬ <b>AtenciÃ³n al pÃºblico</b>

Â¿En quÃ© puedo asistirte hoy?`;

      addBotMessage(welcomeMessage, true);
    }

    function addBotMessage(message, showQuickActions = false) {
      const messagesContainer = document.getElementById('chatbot-messages');
      const messageDiv = document.createElement('div');
      messageDiv.className = 'message bot';

      messageDiv.innerHTML = `
        <div class="message-avatar">ğŸ’¬</div>
        <div class="message-content">
          ${message.replace(/\n/g, '<br>')}
          ${showQuickActions ? getQuickActions() : ''}
        </div>
      `;

      messagesContainer.appendChild(messageDiv);
      messagesContainer.scrollTop = messagesContainer.scrollHeight;
    }

    function addUserMessage(message) {
      const messagesContainer = document.getElementById('chatbot-messages');
      const messageDiv = document.createElement('div');
      messageDiv.className = 'message user';

      messageDiv.innerHTML = `
        <div class="message-avatar">ğŸ‘¤</div>
        <div class="message-content">${message}</div>
      `;

      messagesContainer.appendChild(messageDiv);
      messagesContainer.scrollTop = messagesContainer.scrollHeight;
    }

    function getQuickActions() {
      return `
        <div class="quick-actions">
          <div class="quick-action" onclick="handleQuickAction('buscar-causa')">ğŸ“‘ Causas</div>
          <div class="quick-action" onclick="handleQuickAction('buscar-partes')">ğŸ‘¥ Partes</div>
          <div class="quick-action" onclick="handleQuickAction('proteccion-personas')">ğŸ›¡ï¸ ProtecciÃ³n</div>
          <div class="quick-action" onclick="handleQuickAction('audiencias')">ğŸ“… Audiencias</div>
          <div class="quick-action" onclick="handleQuickAction('vencimientos')">â° Vencimientos</div>
          <div class="quick-action" onclick="handleQuickAction('estadistica')">ğŸ“Š EstadÃ­stica</div>
          <div class="quick-action" onclick="handleQuickAction('atencion-publico')">ğŸ’¬ PÃºblico</div>
          <div class="quick-action" onclick="handleQuickAction('ir-seccion')">ğŸ“‚ Ir a secciÃ³n</div>
          <div class="quick-action" onclick="handleQuickAction('ayuda')">â“ Ayuda</div>
        </div>
      `;
    }

    function handleQuickAction(action) {
      let response = '';

      switch(action) {
        case 'buscar-causa':
          addUserMessage('ğŸ“‘ Buscar causa');
          response = `En <b>Registro Causas</b> podÃ©s:
          
ğŸ” Buscar por nÃºmero de expediente  
ğŸ‘¥ Buscar por nombre de las partes  
ğŸ“… Filtrar por fechas  
ğŸ“‹ Ver el estado de cada causa  

Â¿QuerÃ©s abrir <b>Registro Causas</b>?`;
          break;

        case 'buscar-partes':
          addUserMessage('ğŸ‘¥ Datos Partes');
          response = `En <b>Datos Partes</b> podÃ©s:

ğŸ” Buscar por nombre o apellido  
ğŸ†” Buscar por DNI  
ğŸ  Consultar domicilios  
âš–ï¸ Ver situaciÃ³n legal de cada parte  

Â¿QuerÃ©s abrir <b>Datos Partes</b>?`;
          break;

        case 'proteccion-personas':
          addUserMessage('ğŸ›¡ï¸ ProtecciÃ³n Personas');
          response = `En <b>ProtecciÃ³n Personas</b> podÃ©s:

ğŸ“ Registrar nuevas medidas  
ğŸ” Buscar por nombre, DNI o causa  
ğŸ“… Ver vencimientos de medidas  
âš–ï¸ Modificar o prorrogar medidas  

Â¿QuerÃ©s abrir <b>ProtecciÃ³n Personas</b>?`;
          break;

        case 'audiencias':
          addUserMessage('ğŸ“… Audiencias');
          response = `En el <b>Calendario</b> podÃ©s:

ğŸ“… Ver todas las audiencias programadas  
â° Consultar audiencias de hoy o esta semana  
ğŸ” Buscar por causa o parte  
ğŸ”” Configurar recordatorios  

Â¿QuerÃ©s abrir el <b>Calendario</b>?`;
          break;

        case 'vencimientos':
          addUserMessage('â° Vencimientos');
          response = `En <b>Vencimientos</b> podÃ©s:

ğŸ“‹ Revisar tÃ©rminos procesales  
ğŸ“… Ver fechas lÃ­mite prÃ³ximas  
ğŸ”” Configurar alertas  
ğŸ“Š Analizar vencimientos por causa o globales  

Â¿QuerÃ©s abrir la secciÃ³n de <b>Vencimientos</b>?`;
          break;

        case 'estadistica':
          addUserMessage('ğŸ“Š EstadÃ­stica');
          response = `En <b>EstadÃ­stica</b> podÃ©s:

ğŸ“Š Consultar cantidad de causas  
ğŸ“ˆ Ver plazos vencidos o vigentes  
ğŸ‘¥ EstadÃ­sticas de partes  
âš–ï¸ Indicadores de gestiÃ³n  

Â¿QuerÃ©s abrir <b>EstadÃ­stica</b>?`;
          break;

        case 'atencion-publico':
          addUserMessage('ğŸ’¬ AtenciÃ³n PÃºblico');
          response = `En <b>AtenciÃ³n al PÃºblico</b> podÃ©s:

ğŸ“¨ Registrar nuevas consultas  
ğŸ“‹ Ver historial de consultas  
ğŸ‘¥ Relacionar con causas y partes  
ğŸ“Š Generar reportes de atenciÃ³n  

Â¿QuerÃ©s abrir <b>AtenciÃ³n PÃºblico</b>?`;
          break;

        case 'ir-seccion':
          addUserMessage('ğŸ“‚ Ir a secciÃ³n');
          response = `Decime a cuÃ¡l secciÃ³n querÃ©s ir:

â€¢ <b>Registro Causas</b>  
â€¢ <b>Datos Partes</b>  
â€¢ <b>ProtecciÃ³n Personas</b>  
â€¢ <b>Calendario</b>  
â€¢ <b>EstadÃ­stica</b>  
â€¢ <b>AtenciÃ³n PÃºblico</b>`;
          break;

        case 'ayuda':
          addUserMessage('â“ Ayuda');
          response = `Comandos Ãºtiles:

ğŸ“‘ <b>"Buscar causa 123/2024"</b>  
ğŸ‘¥ <b>"Buscar parte Juan PÃ©rez"</b> o <b>"DNI 12345678"</b>  
ğŸ›¡ï¸ <b>"Medidas de protecciÃ³n de [Nombre]"</b>  
ğŸ“… <b>"Audiencias de hoy"</b>  
â° <b>"Vencimientos prÃ³ximos"</b>  
ğŸ“Š <b>"Ver estadÃ­sticas"</b>  
ğŸ“‚ <b>"Ir a [secciÃ³n]"</b>`;
          break;
      }

      setTimeout(() => addBotMessage(response), 400);
    }

    function sendMessage() {
      const input = document.getElementById('chatbot-input');
      const message = input.value.trim();

      if (message) {
        addUserMessage(message);
        input.value = '';
        setTimeout(() => processUserMessage(message), 400);
      }
    }

    function processUserMessage(message) {
      const lowerMessage = message.toLowerCase();
      let response = '';

      // BÃšSQUEDAS (intenciÃ³n)
      if (lowerMessage.includes('buscar') || lowerMessage.includes('encontrar')) {
        // EspecÃ­fico por dominio
        if (lowerMessage.includes('causa') || lowerMessage.includes('expediente')) {
          loadPage('https://defensoria6.github.io/registro-causas/', null);
          document.getElementById('active-section').innerText = "Registro Causas";
          response = `âœ… AbrÃ­ <b>Registro Causas</b>. AllÃ­ podÃ©s buscar por nÃºmero de expediente, partes o fechas.`;
        } else if (lowerMessage.includes('parte') || lowerMessage.includes('persona') || lowerMessage.includes('dni')) {
          loadPage('https://defensoria6.github.io/datospartes/', null);
          document.getElementById('active-section').innerText = "Datos Partes";
          response = `âœ… AbrÃ­ <b>Datos Partes</b>. BuscÃ¡ por nombre, apellido o DNI.`;
        } else if (lowerMessage.includes('protecciÃ³n') || lowerMessage.includes('medida')) {
          loadPage('https://defensoria6.github.io/proteccion-personas/', null);
          document.getElementById('active-section').innerText = "ProtecciÃ³n Personas";
          response = `âœ… AbrÃ­ <b>ProtecciÃ³n Personas</b>. PodÃ©s buscar medidas por nombre/DNI o causa.`;
        } else if (lowerMessage.includes('audiencia') || lowerMessage.includes('calendario') || lowerMessage.includes('agenda')) {
          loadPage('https://defensoria6.github.io/calendario/', null);
          document.getElementById('active-section').innerText = "Calendario";
          response = `âœ… AbrÃ­ el <b>Calendario</b>. FiltrÃ¡ por fecha, causa o parte.`;
        } else if (lowerMessage.includes('estad') || lowerMessage.includes('reporte') || lowerMessage.includes('indicador')) {
          loadPage('https://defensoria6.github.io/estadistica-sistema/', null);
          document.getElementById('active-section').innerText = "EstadÃ­stica";
          response = `âœ… AbrÃ­ <b>EstadÃ­stica</b>. VisualizÃ¡ reportes e indicadores de gestiÃ³n.`;
        } else if (lowerMessage.includes('pÃºblico') || lowerMessage.includes('consulta')) {
          loadPage('https://defensoria6.github.io/atencion-publico/', null);
          document.getElementById('active-section').innerText = "AtenciÃ³n PÃºblico";
          response = `âœ… AbrÃ­ <b>AtenciÃ³n PÃºblico</b>. RegistrÃ¡ y consultÃ¡ atenciones.`;
        } else {
          response = `ğŸ” Â¿QuÃ© deseÃ¡s buscar?

â€¢ <b>Causas</b> (nÃºmero, partes, fecha)  
â€¢ <b>Partes</b> (nombre, apellido, DNI)  
â€¢ <b>Medidas de protecciÃ³n</b> (nombre, DNI, causa)  
â€¢ <b>Audiencias</b> (fecha, causa, parte)  
â€¢ <b>EstadÃ­sticas</b> (indicadores, periodos)  
â€¢ <b>AtenciÃ³n al pÃºblico</b> (consultas, historial)`;
        }

      // NAVEGACIÃ“N rÃ¡pida por texto
      } else if (lowerMessage.includes('ir a') || lowerMessage.includes('abrir') || lowerMessage.includes('secciÃ³n')) {
        if (lowerMessage.includes('registro') || lowerMessage.includes('causa')) {
          loadPage('https://defensoria6.github.io/registro-causas/', null);
          document.getElementById('active-section').innerText = "Registro Causas";
          response = `âœ… Te dirigÃ­ a <b>Registro Causas</b>.`;
        } else if (lowerMessage.includes('datos') || lowerMessage.includes('partes')) {
          loadPage('https://defensoria6.github.io/datospartes/', null);
          document.getElementById('active-section').innerText = "Datos Partes";
          response = `âœ… Te dirigÃ­ a <b>Datos Partes</b>.`;
        } else if (lowerMessage.includes('protecciÃ³n') || lowerMessage.includes('medida')) {
          loadPage('https://defensoria6.github.io/proteccion-personas/', null);
          document.getElementById('active-section').innerText = "ProtecciÃ³n Personas";
          response = `âœ… Te dirigÃ­ a <b>ProtecciÃ³n Personas</b>.`;
        } else if (lowerMessage.includes('calendario') || lowerMessage.includes('audien')) {
          loadPage('https://defensoria6.github.io/calendario/', null);
          document.getElementById('active-section').innerText = "Calendario";
          response = `âœ… Te dirigÃ­ al <b>Calendario</b>.`;
        } else if (lowerMessage.includes('estad')) {
          loadPage('https://defensoria6.github.io/estadistica-sistema/', null);
          document.getElementById('active-section').innerText = "EstadÃ­stica";
          response = `âœ… Te dirigÃ­ a <b>EstadÃ­stica</b>.`;
        } else if (lowerMessage.includes('atenciÃ³n') || lowerMessage.includes('pÃºblico')) {
          loadPage('https://defensoria6.github.io/atencion-publico/', null);
          document.getElementById('active-section').innerText = "AtenciÃ³n PÃºblico";
          response = `âœ… Te dirigÃ­ a <b>AtenciÃ³n PÃºblico</b>.`;
        } else {
          response = `ğŸ“‚ IndicÃ¡ la secciÃ³n: <b>Registro Causas</b>, <b>Datos Partes</b>, <b>ProtecciÃ³n Personas</b>, <b>Calendario</b>, <b>EstadÃ­stica</b> o <b>AtenciÃ³n PÃºblico</b>.`;
        }

      // AUDIENCIAS / CALENDARIO
      } else if (lowerMessage.includes('audiencia')) {
        loadPage('https://defensoria6.github.io/calendario/', null);
        document.getElementById('active-section').innerText = "Calendario";
        response = `ğŸ“… AbrÃ­ el <b>Calendario</b> para ver y filtrar audiencias.`;

      // VENCIMIENTOS
      } else if (lowerMessage.includes('vencimiento') || lowerMessage.includes('plazo')) {
        response = `â° Vencimientos:
â€¢ PrÃ³ximos 7 dÃ­as
â€¢ Este mes
â€¢ Por causa
â€¢ Alertas automÃ¡ticas

Â¿QuerÃ©s abrir el <b>Calendario</b> para revisar fechas?`;

      // SALUDO / AYUDA
      } else if (lowerMessage.includes('hola') || lowerMessage.includes('ayuda') || lowerMessage.includes('help')) {
        response = `Â¡Hola! ğŸ‘‹ Puedo ayudarte a:
â€¢ Buscar <b>causas</b>, <b>partes</b> y <b>medidas de protecciÃ³n</b>
â€¢ Ver <b>audiencias</b> y <b>vencimientos</b>
â€¢ Navegar a cualquier <b>secciÃ³n</b> del portal
â€¢ Consultar <b>estadÃ­sticas</b> o <b>atenciÃ³n al pÃºblico</b>

ProbÃ¡: <b>"Buscar causa 123/2024"</b> o <b>"Ir a ProtecciÃ³n Personas"</b>.`;

      // RESPUESTA GENÃ‰RICA
      } else {
        response = `ğŸ¤” No entendÃ­ bien: "${message}".

PodÃ©s pedirme:
â€¢ <b>"Buscar causa 123/2024"</b>
â€¢ <b>"Buscar parte Juan PÃ©rez"</b> o <b>"DNI 12345678"</b>
â€¢ <b>"Medidas de protecciÃ³n vigentes"</b>
â€¢ <b>"Audiencias de hoy"</b>
â€¢ <b>"Ir a EstadÃ­stica"</b>`;
      }

      addBotMessage(response);
    }

    function handleChatbotKeyPress(event) {
      if (event.key === 'Enter') {
        sendMessage();
      }
    }
  </script>
</body>
</html>
