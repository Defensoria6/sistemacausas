<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Portal Defensor√≠a</title>
  <style>
    * {box-sizing: border-box; margin: 0; padding: 0; font-family: Arial, sans-serif;}
    body {background: #f9f9f9; color: #333; height: 100vh; display: flex; flex-direction: column;}

    /* Login */
    #login-container {
      display: flex; justify-content: center; align-items: center;
      height: 100vh; text-align: center; padding: 1rem;
    }
    #login-box {
      background: white; padding: 2rem; border-radius: 12px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      width: 100%; max-width: 420px;
    }
    #login-box h1 {font-size: 1.3rem; margin-bottom: 0.5rem;}
    #login-box h3 {font-size: 0.95rem; color: #555; margin-bottom: 1.5rem;}
    #login-box h2 {margin-bottom: 1rem;}
    #login-box input, #login-box select {
      width: 100%; padding: 0.75rem; margin: 0.5rem 0;
      border: 1px solid #ccc; border-radius: 8px; font-size: 1rem;
    }
    #login-box button {
      width: 100%; padding: 0.75rem; background: #0066cc;
      color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 1rem;
    }
    #login-box button:hover {background: #004999;}
    #login-box p.notice {
      font-size: 0.85rem; color: #444; margin-top: 1.5rem; line-height: 1.5;
      background: #f1f1f1; border: 1px solid #ccc; border-radius: 8px;
      padding: 1rem; text-align: center;
    }

    /* App Layout */
    #app {display: none; flex: 1; flex-direction: column; min-height: 100vh;}

    header {
      background: #0066cc; color: white; padding: 0.75rem 1rem;
      display: flex; justify-content: space-between; align-items: center;
    }
    header h1 {font-size: 1.25rem;}

    .top-user-info {display: flex; align-items: center; gap: 1rem;}
    .top-user-info .user-details {text-align: right; font-size: 0.9rem; line-height: 1.4;}
    .top-user-info .user-details strong {font-weight: bold;}
    .top-user-info button {
      background: #cc0000; color: white; font-weight: bold;
      border: none; border-radius: 6px;
      padding: 0.5rem 1rem; cursor: pointer;
    }
    .top-user-info button:hover {background: #990000;}

    /* Sidebar lateral */
    .layout {display: flex; flex: 1;}
    .sidebar {
      display: flex; flex-direction: column;
      width: 220px;
      background: #0066cc;
      color: white;
      padding: 1rem 0.5rem;
      height: calc(100vh - 60px);
      transition: width 0.3s ease;
      cursor: pointer;
      position: relative;
    }
    .sidebar.collapsed {width: 70px;}
    .sidebar h2 {
      font-size: 1rem;
      margin-bottom: 1rem;
      text-align: center;
      transition: opacity 0.3s ease;
    }
    .sidebar.collapsed h2 {opacity: 0;}
    .sidebar nav a {
      display: flex; align-items: center; gap: 10px;
      color: white; text-decoration: none;
      padding: 0.6rem; margin: 0.3rem;
      border-radius: 6px;
      background: rgba(255,255,255,0.1);
      transition: all 0.3s ease;
      white-space: nowrap;
      position: relative;
    }
    .sidebar nav a:hover {background: rgba(255,255,255,0.3);}
    .sidebar.collapsed nav a span {display: none;}

    /* Tooltip */
    .sidebar nav a::after {
      content: attr(data-title);
      position: absolute;
      left: 100%; top: 50%;
      transform: translateY(-50%);
      background: #333; color: #fff;
      padding: 4px 8px; border-radius: 4px;
      white-space: nowrap;
      opacity: 0; pointer-events: none;
      transition: opacity 0.2s;
      margin-left: 8px;
      font-size: 0.8rem;
    }
    .sidebar.collapsed nav a:hover::after {
      opacity: 1;
    }

    /* Main */
    main {flex: 1; display: flex;}
    iframe {flex: 1; border: none; background: white; min-height: 500px; overflow: auto;}
  </style>
</head>
<body>
  <!-- Login -->
  <div id="login-container">
    <div id="login-box">
      <h1>Sistema de Administraci√≥n de Causas Judiciales</h1>
      <h3>Defensor√≠a Civil y Comercial 6 - Poder Judicial de Misiones</h3>
      <h2>Iniciar Sesi√≥n</h2>
      <form id="login-form" onsubmit="event.preventDefault(); login();">
        <input type="text" id="username" placeholder="Usuario (Nombre Apellido)">
        <input type="email" id="email" placeholder="Email">
        <select id="role">
          <option value="">Seleccione rol de usuario</option>
          <option value="Administrador">Administrador</option>
          <option value="Defensor">Defensor</option>
          <option value="Secretario">Secretario</option>
          <option value="Empleado">Empleado</option>
        </select>
        <input type="password" id="password" placeholder="Contrase√±a">
        <button type="submit">Entrar</button>
      </form>
      <p class="notice">
        En caso de alg√∫n inconveniente, problema de funcionalidad, dudas o consultas sobre el sistema:<br>
        Comun√≠quese al email: <a href="mailto:rcfioravante@jusmisiones.gov.ar">rcfioravante@jusmisiones.gov.ar</a><br><br>
        Incluya en el mensaje los siguientes datos: Nombre y Apellido, Email y Rol de Usuario registrado en el sistema.<br>
        En breve estaremos en contacto.
<h3>Acceso Remoto con Autorizacion de Uso</h3>
      </p>
    </div>
  </div>

  <!-- App -->
  <div id="app">
    <header>
      <h1 id="active-section">Portal Defensor√≠a</h1>
      <div class="top-user-info">
        <div class="user-details" id="user-info"></div>
        <button onclick="logout()">Cerrar Sesi√≥n</button>
      </div>
    </header>

    <div class="layout">
      <div class="sidebar" id="sidebar">
        <h2>Men√∫</h2>
        <nav>
          <a href="#" onclick="loadPage('https://defensoria6.github.io/registro-causas/', this)" data-title="Registro Causas">üìë <span>Registro Causas</span></a>
          <a href="#" onclick="loadPage('https://defensoria6.github.io/datospartes/', this)" data-title="Datos Partes">üë• <span>Datos Partes</span></a>
          <a href="#" onclick="loadPage('https://defensoria6.github.io/proteccion-personas/', this)" data-title="Protecci√≥n Personas">üõ°Ô∏è <span>Protecci√≥n Personas</span></a>
          <a href="#" onclick="loadPage('https://defensoria6.github.io/calendario/', this)" data-title="Calendario">üìÖ <span>Calendario</span></a>
          <a href="#" onclick="loadPage('https://defensoria6.github.io/estadistica-sistema/', this)" data-title="Estad√≠stica">üìä <span>Estad√≠stica</span></a>
          <a href="#" onclick="loadPage('https://defensoria6.github.io/atencion-publico/', this)" data-title="Atenci√≥n P√∫blico">üí¨ <span>Atenci√≥n P√∫blico</span></a>
        </nav>
      </div>

      <main>
        <iframe id="content-frame" src="https://defensoria6.github.io/registro-causas/"></iframe>
      </main>
    </div>
  </div>

  <script>
    function login(){
      const user = document.getElementById('username').value.trim();
      const email = document.getElementById('email').value.trim();
      const role = document.getElementById('role').value.trim();
      const pass = document.getElementById('password').value.trim();
      if(user && email && role && pass){
        document.getElementById('login-container').style.display = 'none';
        document.getElementById('app').style.display = 'flex';
        document.getElementById('user-info').innerHTML =
          "<strong>" + user + "</strong><br>" +
          email + "<br>" +
          "<strong>Rol: " + role + "</strong>";
        document.getElementById('active-section').innerText = "Registro Causas";
      } else {
        alert('Complete todos los campos: usuario, email, rol y contrase√±a');
      }
    }

    function logout(){
      document.getElementById('app').style.display = 'none';
      document.getElementById('login-container').style.display = 'flex';
      document.getElementById('username').value = '';
      document.getElementById('email').value = '';
      document.getElementById('role').value = '';
      document.getElementById('password').value = '';
    }

    function loadPage(url, element){
      const iframe = document.getElementById('content-frame');
      iframe.src = url;
      if(element) document.getElementById('active-section').innerText = element.getAttribute("data-title");
    }

    // Sidebar toggle con clic
    document.getElementById('sidebar').addEventListener('click', function(e) {
      if(e.target.tagName !== "A"){ // no colapsar si clic en un link
        this.classList.toggle('collapsed');
      }
    });

    function resizeIframe(iframe) {
      try {
        iframe.style.height = iframe.contentWindow.document.body.scrollHeight + 'px';
      } catch (e) {
        iframe.style.height = window.innerHeight + 'px';
      }
    }
    window.addEventListener('resize', () => {
      const iframe = document.getElementById('content-frame');
      resizeIframe(iframe);
    });
  </script>
</body>
</html>
